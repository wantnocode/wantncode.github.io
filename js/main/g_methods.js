/*
 qq:820115719  autor xiaotian  weixin:wywin2021*/
var graph_methods={initGraphData:function(b){b.nodeArray.forEach(function(a){a.d_stroke=a.stroke;a.d_fill=a.fill;a.default_stroke=a.d_stroke;a.default_fill=a.d_fill});b.linkArray.forEach(function(a){a.d_stroke=a.stroke});nodeArray=b.nodeArray;linkArray=b.linkArray;layout=b.layout;setLayout(layout)},addGraphData:function(b){b.nodeArray.map(function(a){myDiagram.model.addNodeData(a)});b.linkArray.map(function(a){myDiagram.model.addLinkData(a);"sankey"==b.layout&&1==b.animation&&(animation=null,animation=
new go.Animation,animation.easing=go.Animation.EaseLinear,myDiagram.links.each(function(c){c.data.id==a.id&&c.data.money==a.money&&(c.findObject("PIPE").opacity=1,animation.add(c.findObject("PIPE"),"strokeDashOffset",20,0))}),animation.runCount=Infinity,animation.start(),setTimeout(function(){myDiagram.links.each(function(c){c.fromNode.key==a.from&&c.toNode.key==a.to&&(c.findObject("PIPE").opacity=0)});animation.stop()},1E4))});myDiagram.layoutDiagram(!0)},getGraphAssets:function(b){if(1==b)graph_tool.makeBlob_toParent();
else if(2==b)return{vertexs:updateData().nodeDataArray,edges:updateData().linkDataArray,msg:"\u83b7\u53d6\u9009\u4e2d\u70b9\u548c\u8fb9\u96c6\u5408"}},editGraphData:function(b){var a=b.nodeArray;b=b.linkArray;a&&0<a.length&&a.map(function(c){myDiagram.nodes.each(function(e){c.key==e.data.key&&(myDiagram.model.removeNodeData(e.data),myDiagram.model.addNodeData(c))})});b&&0<b.length&&b.map(function(c){myDiagram.links.each(function(e){c.from==e.data.from&&c.to==e.data.to&&c.id==e.data.id&&(myDiagram.model.removelinkData(e.data),
myDiagram.model.addlinkData(c))})})},lockingNode:function(){var b=graph_tool.getcurrentNodes();nodeArray.forEach(function(a){a.key==b[0].key&&(a.isLocking=1,a.loc={x:b[0].bounds.x,y:b[0].bounds.y})})},unlockingNode:function(){var b=graph_tool.getcurrentNodes();nodeArray.forEach(function(a){a.key==b[0].key&&(a.isLocking=0,a.loc="")})},filterGraphElements:function(b,a){var c=b.key,e=b.value;""==c?(myDiagram.nodes.each(function(d){d.part.visible=!0}),myDiagram.links.each(function(d){d.part.visible=!0})):
1==a?myDiagram.nodes.each(function(d){d.part.data[c]!==e&&(d.part.visible=!1)}):2==a?myDiagram.links.each(function(d){d.part.data[c]!==e&&(d.part.visible=!1)}):(myDiagram.nodes.each(function(d){d.part.data[c]!==e&&(d.part.visible=!1)}),myDiagram.links.each(function(d){d.part.data[c]!==e&&(d.part.visible=!1)}))}};